# ABOUTME: Copier template configuration for scaffolding git worktree-based projects.
# ABOUTME: Defines questions, file exclusions, and post-copy tasks.

_subdirectory: template
_templates_suffix: .jinja
_preserve_symlinks: true

_tasks:
  - command: "bash .mise/tasks/setup"
    when: "{{ _copier_operation == 'copy' }}"
  - command: >-
      if command -v mise &>/dev/null; then
        mise trust;
      else
        echo "";
        echo "WARNING: mise is not installed.";
        echo "  Install it from https://mise.jdx.dev/ to use worktree tasks (wt-add, wt-rm, wt-ls, etc).";
      fi
    when: "{{ _copier_operation == 'copy' }}"

_message_before_copy: |
  Scaffolds a git worktree-based project using the bare repo pattern.

_message_after_copy: |
  Project scaffolded successfully!
  cd into your project and start working:
    cd {{ _copier_conf.dst_path }}/main/

git_remote_url:
  type: str
  help: Git remote URL to clone (leave empty to start a fresh repo)
  default: ""
